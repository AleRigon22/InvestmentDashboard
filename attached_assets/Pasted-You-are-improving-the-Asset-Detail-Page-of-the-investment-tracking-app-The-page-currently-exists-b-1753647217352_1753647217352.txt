You are improving the Asset Detail Page of the investment tracking app. The page currently exists, but several critical functions are missing or broken. You will fix data calculations, chart rendering, and overall structure according to the following detailed specifications.

---

ğŸ“ PAGE CONTEXT
- Route: `/asset/:symbol`
- Triggered by clicking the magnifying glass next to an asset in the Holdings page
- Displays all personal data related to a single asset

---

ğŸ”§ 1. FIX KPI CALCULATIONS (no more NaN)
Correct the logic and ensure all numeric values are properly formatted and calculated.

- Total Invested = sum(quantity Ã— price + fees) from all buy transactions
- Quantity Held = sum of currently held shares
- Market Value = quantity held Ã— current price
- Average Buy Price = total invested / quantity held
- Unrealized P&L = Market Value â€“ Total Invested
- Realized P&L = from sell transactions only

Use valid numeric parsing, avoid returning NaN in any case.

---

ğŸ§± 2. KPI LAYOUT: 2 ROWS, 3 COLUMNS

| Row 1                         | Row 2                              |
|------------------------------|-------------------------------------|
| Total Invested               | Average Buy Price                  |
| Quantity Held                | Realized P&L                       |
| Market Value                 | Unrealized P&L                     |

Also add:  
- Portfolio Weight (% of current portfolio) as a small badge or tooltip  
- Status tag (Active or Closed)

---

ğŸ“ˆ 3. FIX PERFORMANCE CHART (Line Chart)
The Investment Performance chart is currently empty. Populate it using actual data:

- Line 1: Invested capital over time
- Line 2: Market value over time

X-axis: date  
Y-axis: value in â‚¬  
Provide fallback UI if there are less than 2 data points (e.g., message â€œNot enough data to show chartâ€).

---

ğŸ§¾ 4. FIX TRANSACTION TABLE
Correct the table that lists transactions for the asset:

- Columns: Date | Type (Buy/Sell) | Quantity | Price | Total | Fees
- Calculate Total = Quantity Ã— Price
- Add a â€œNet Totalâ€ column = Total â€“ Fees
- Format all values as currency
- Ensure date and type are clearly labeled

---

ğŸ“ 5. IMPROVE PERSONAL NOTES BLOCK
- Show editable note area labeled â€œPersonal Notesâ€
- Add icon ğŸ“ and timestamp of last update
- Allow editing inline with auto-save or explicit Save button
- Apply subtle styling to make it readable and clean

---

â³ 6. HANDLE CLOSED POSITION STATE (if asset is fully sold)
- If quantity held is 0:
  - Show tag "Closed"
  - Show holding period: date of first buy to date of last sell
  - Show total days held (e.g., â€œ206 daysâ€)

---

ğŸ› ï¸ 7. BUTTON ACTIONS
Ensure the top buttons function correctly:

- Edit Asset â†’ open modal or navigate to edit page
- Add Transaction â†’ open add transaction modal with asset pre-filled
- Add Dividend â†’ open dividend form modal

---

ğŸ“± 8. MOBILE RESPONSIVENESS
- Stack KPI blocks vertically
- Charts should be full-width with scroll or resize
- Tables should allow horizontal scrolling
- Keep top action buttons accessible

---

ğŸ¯ GOAL
Make the Asset Detail Page fully functional, user-friendly, and visually clean. Avoid any placeholders or broken states (NaN, empty charts, dead buttons). Match the style of the rest of the app and use consistent color and spacing.
