Please update the Manual Investment Portfolio Tracker project with the following changes:

1️⃣ Snapshot "Invested" Value – Correct Calculation
Current issue:
In All Snapshots, the Invested value is incorrect or zero. The value in the card at the top is also incorrect.

Required fix:
Calculate the Invested value for each snapshot based on the actual sum of all buy transactions up to that snapshot’s date, including fees.

The calculation must consider:

Metric	Formula
Invested (Total)	Σ(Buy Quantity × Unit Price + Buy Fees) – Σ(Sell Quantity × Unit Price – Sell Fees)

Apply this logic to each snapshot’s date range so the invested value reflects real historical positions.

Category Breakdown:
In each snapshot, divide the Invested value across the 4 categories:

Category	Calculation
Stocks	Sum of stock transactions
ETFs	Sum of ETF transactions
Crypto	Sum of crypto transactions
Bonds/Funds	Sum of bond/fund transactions

Display the category breakdown inside the accordion snapshot view, in line with the Total Value and P&L per category.

Dashboard Card:
Ensure the Invested value shown in the top card of the Dashboard is calculated correctly using the same logic.

2️⃣ Current Price Edit – Final Fix
Current issue:
Editing the Current Price still has no effect. The new value is not saved or reflected.

Required fix:
Remove any constraints or date dependency (confirm this has been fully removed).

Ensure that when the user confirms a new Current Price (via modal or inline edit):

The new value is saved immediately in the asset’s data.

The following are updated:

Market Value = Current Price × Quantity

Unrealized P&L (current value – invested)

All relevant graphs and tables

This value must persist after page reload and be stored correctly.

3️⃣ Summary of Actions
Feature	Action
Snapshot Invested Calculation	Calculate invested value from transactions, with category breakdown
Dashboard Card	Show correct invested amount in the top summary card
Current Price Edit	Make current price modification functional and persistent

Final instruction to Replit AI:
Apply these changes directly to the current project.
Ensure snapshots reflect real transaction-based investments, the Dashboard card shows correct totals, and the Current Price update works reliably.

Test both partial and full flows, including asset editing, snapshot review, and dashboard calculations.

