Please update the Manual Investment Portfolio Tracker project with the following changes:

1️⃣ Full Asset Sell – Handling Logic
Current issue:
There is no clear logic to handle a total sale of an asset (when the user sells all remaining quantity).

Required behavior:
When a user sells 100% of an asset's quantity:

Mark the position as "Closed" internally.

Quantity becomes 0.

Keep the transaction history intact (do not delete the asset).

Continue to display the asset in the "Closed Positions" section or allow filtering to hide/show it.

For Closed Positions:
Display the following additional information:

Total Quantity Bought

Total Quantity Sold

Average Sell Price:
Σ (Sell Quantity × Sell Price) ÷ Total Sold Quantity

Realized P&L:
(Average Sell Price – Average Buy Price) × Total Quantity Sold

Holding Period:
From first buy date to last sell date

2️⃣ Icon Update – Ticker in Circle with Color per Category
Current issue:
Icons are static and do not reflect the ticker or category color coding.

Required fix:
For each asset, display a circle badge at the left of the asset row containing the ticker symbol.

Use different background colors per asset category:

Asset Category	Color Example
Stock	Blue
ETF	Green
Crypto	Orange
Bond	Purple
Cash	Grey

The ticker letters should be in bold or uppercase, centered inside the circle.

This badge must be consistent in:

Holdings table

Transaction forms

Dividends page (if applicable)

3️⃣ Transaction History – Action Buttons Fix
Current issue:
In the Transaction History page, the action buttons (Edit/Delete) do not work properly.

Required fix:
Edit Transaction:

Open a modal pre-filled with the selected transaction details.

Allow editing of:

Date

Type (Buy/Sell/Dividend)

Quantity

Unit Price

Fees

After saving, recalculate the impacted asset’s quantity, market value, and P&L.

Delete Transaction:

Confirm deletion with a prompt.

On delete, update the asset’s data:

Adjust the quantity, average price, and market value accordingly.

If the deletion causes the asset to go back to zero quantity, handle it as a closed position.

4️⃣ Summary of Required Changes
Feature	Action
Full Sell	Implement logic for total asset sale and closed position handling
Icon Badge	Display ticker in circle with category color
Transaction History	Fix Edit and Delete buttons; update related calculations

Final instruction to Replit AI:
Apply these changes to the current project structure.
Ensure the Holdings, Transaction History, and UI components reflect the new logic consistently.
Test full workflows, including buying, selling (full and partial), editing, and deleting transactions.